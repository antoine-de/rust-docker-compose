machine:
  pre:
    - curl -sSf https://static.rust-lang.org/rustup.sh | sh -s -- -y --revision=1.8.0
    - sudo wget -O /usr/local/bin/docker-compose 'https://github.com/docker/compose/releases/download/1.7.1/docker-compose-Linux-x86_64'
    - sudo chmod 0755 /usr/local/bin/docker-compose
  services:
    - docker
  environment:
    TERM: dumb
dependencies:
  override:
    - cargo fetch
  cache_directories:
    - "~/.cargo"
test:
  override:
    - cargo test
